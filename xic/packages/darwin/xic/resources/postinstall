#! /bin/sh
# $1 : the full path to the installation package
# $2 : the full path to the installation destination
# $3 : the mountpoint of the destination volume
# $4 : the root directory for the current System folder

prefix=$2
libdir=$prefix/xictools/xic

# Deal with config files
cfgfiles="device.lib \
    model.lib \
    mozyrc \
    xic_format_lib \
    xic_mesg \
    xic_stipples \
    xic_tech.hyp \
    xic_tech.scmos"

for a in $cfgfiles; do
    if [ -f $libdir/startup/$a.tmporig ]; then
        if [ -f $libdir/startup/$a ]; then
            tmp=`diff $libdir/startup/$a.tmporig $libdir/startup/$a`
            if [ x"$tmp" = "x" ]; then
                rm -f $libdir/startup/$a.tmporig
            else
                mv -f $libdir/startup/$a.tmporig $libdir/startup/$a.orig
            fi
        else
            mv -f $libdir/startup/$a.tmporig $libdir/startup/$a
        fi
    fi
done

# Link technology file
if [ ! -f $libdir/startup/xic_tech ]; then
    ln -s xic_tech.scmos $libdir/startup/xic_tech
fi

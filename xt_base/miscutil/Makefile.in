#######################################################################
# src/miscutil/Makefile.in
#######################################################################
# $Id: Makefile.in,v 1.24 2015/07/17 19:44:02 stevew Exp $
#######################################################################

DATE = @DATE@

CXX = @CXX@
CC = @CC@
CFLAGS = @CFLAGS_SG@ @UFLAGS@
DEPEND_PROG = @DEPEND_PROG@ @CFLAGSG@
AR = @AR@
RANLIB = @RANLIB@
FILTER = @FILTER@

LIB_TARGET = miscutil.a

HFILES = \
    atomic_stack.h \
    childproc.h \
    coresize.h \
    crypt.h \
    encode.h \
    errorrec.h \
    filestat.h \
    hashfunc.h \
    largefile.h \
    lstring.h \
    miscmath.h \
    miscutil.h \
    msw.h \
    pathlist.h \
    quicksort.h \
    random.h \
    randval.h \
    rangetest.h \
    services.h \
    smartarray.h \
    symtab.h \
    texttf.h \
    threadpool.h \
    timedbg.h \
    timer.h \
    tvals.h \
    update_itf.h

CCFILES = \
    childproc.cc \
    coresize.cc \
    crypt.cc \
    encode.cc \
    errorrec.cc \
    filestat.cc \
    lstring.cc \
    md5.cc \
    miscmath.cc \
    miscutil.cc \
    msw.cc \
    pathlist.cc \
    quicksort.cc \
    random.cc \
    randval.cc \
    texttf.cc \
    threadpool.cc \
    timedbg.cc \
    timer.cc \
    tvals.cc \
    update_itf.cc

SUBDIRS = httpget
CCOBJS = $(CCFILES:.cc=.o)
INCLUDE = -I.

recurse: 
	@for a in $(SUBDIRS); do \
	    (dir=`pwd`; cd $$a; $(MAKE); cd $$dir) \
	done
	$(MAKE) $(LIB_TARGET)

$(LIB_TARGET): $(CCOBJS) $(SUBDIRS:=/*.o)
	@if [ -f $(LIB_TARGET) ]; then \
	    rm -f $(LIB_TARGET); \
	fi
	$(AR) cr $(LIB_TARGET) $(CCOBJS) $(SUBDIRS:=/*.o)
	$(RANLIB) $(LIB_TARGET)

$(SUBDIRS:=/*.o):
	cd $(@D); $(MAKE)

test_hwaddr::
	g++ -o test_hwaddr -DTEST_HWADDR miscutil.cc

.cc.o:
	$(CXX) $(CFLAGS) $(INCLUDE) -c $*.cc

files::
	@echo [ $(CCFILES) $(HFILES) Makefile.in config.h.in ]

subdirs::
	@echo [ $(SUBDIRS) ]

clean:
	-@for a in $(SUBDIRS); do \
	    (dir=`pwd`; cd $$a; $(MAKE) clean; cd $$dir) \
	done
	-@rm -f $(CCOBJS) $(LIB_TARGET) test_hwaddr

distclean:
	-@for a in $(SUBDIRS); do \
	    (dir=`pwd`; cd $$a; $(MAKE) distclean; cd $$dir) \
	done
	-@rm -f $(CCOBJS) $(LIB_TARGET) Makefile test_hwaddr

depend:
	@for a in $(SUBDIRS); do \
	    (dir=`pwd`; cd $$a; $(MAKE) depend; cd $$dir) \
	done
	@echo depending in miscutil
	@if [ x$(DEPEND_DONE) = x ]; then \
	    echo DEPEND_DONE = 1 >> Makefile; \
	    $(DEPEND_PROG) $(INCLUDE) $(CCFILES) $(FILTER) >> Makefile; \
	fi

#######################################################################

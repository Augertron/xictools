#! /bin/bash

# Create the table file that provides version info for remote queries.

exprog=./exported
progs=$($exprog progs)
oses=$($exprog oses)

tabfile=os_tab

echo "# Generated by mktab" > $tabfile
for os in $oses; do
    echo -n $os
    for a in $progs; do
        while [ true ]; do
            read foo
            if [ -z "$foo" ]; then
                break
            fi
            set -- $foo
            if [ $os == $1 ]; then
                echo -n " $a-$2"
                break
            fi
        done < release_$a
    done
    echo
done >> $tabfile


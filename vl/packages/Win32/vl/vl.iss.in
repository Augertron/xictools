
[Setup]

AppName=vl
AppVerName=vl-VERSION
AppVersion=VERSION
AppPublisher=Whiteley Research Inc.
AppPublisherURL=http://www.wrcad.com

OutputBaseFilename=vl-VERSION-setup

Compression=bzip

DefaultDirName=c:\usr\local
DirExistsWarning=no

PrivilegesRequired=admin

UninstallFilesDir={app}\share\vl\uninstall
UninstallDisplayIcon="{app}\bin\vl.exe"

[Dirs]

Name: "{app}\share\vl"
Name: "{app}\share\vl\examples_ivl"
Name: "{app}\share\vl\examples_ivl\work"

[Files]

Source: "data\bin\*.exe"; DestDir: "{app}\bin"

Source: "data\share\vl\README"; DestDir: "{app}\share\vl"
Source: "data\share\vl\ChangeLog"; DestDir: "{app}\share\vl"
Source: "data\share\vl\verilog-manual.html"; DestDir: "{app}\share\vl"

Source: "data\share\vl\examples_book\*"; DestDir: "{app}\share\vl\examples_book"
Source: "data\share\vl\examples_book\ch13\eg\*"; DestDir: "{app}\share\vl\examples_book\ch13\eg"
Source: "data\share\vl\examples_book\ch13\mag_comp\*"; DestDir: "{app}\share\vl\examples_book\ch13\mag_comp"
Source: "data\share\vl\examples_book\ch13\vending\*"; DestDir: "{app}\share\vl\examples_book\ch13\vending"
Source: "data\share\vl\examples_book\ch14\eg\*"; DestDir: "{app}\share\vl\examples_book\ch14\eg"
Source: "data\share\vl\examples_book\ch14\mag_comp\*"; DestDir: "{app}\share\vl\examples_book\ch14\mag_comp"
Source: "data\share\vl\examples_book\ch14\vending\*"; DestDir: "{app}\share\vl\examples_book\ch14\vending"
Source: "data\share\vl\examples_book\extra\*"; DestDir: "{app}\share\vl\examples_book\extra"

Source: "data\share\vl\examples_ivl\*"; DestDir: "{app}\share\examples\vl"
Source: "data\share\vl\examples_ivl\contrib\*"; DestDir: "{app}\share\vl\examples_ivl\contrib"
Source: "data\share\vl\examples_ivl\extra\*"; DestDir: "{app}\share\vl\examples_ivl\extra"
Source: "data\share\vl\examples_ivl\ivltests\*"; DestDir: "{app}\share\vl\examples_ivl\ivltests"

Source: "data\share\vl\examples_vbs\*"; DestDir: "{app}\share\vl\examples_vbs"

[code]

function InitializeSetup(): Boolean;
begin
  Result := True;
  if RegKeyExists(HKLM, 'SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\vl') then begin
    MsgBox('There is an installed vl present from the old' #13 'install tool.  You must uninstall vl before proceeding.', mbInformation, MB_OK);
    Result := False;
  end;
end;

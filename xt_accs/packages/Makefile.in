#######################################################################
# packages/Makefile.in
#######################################################################
# $Id: Makefile.in,v 1.26 2015/07/19 20:54:47 stevew Exp $
#######################################################################

ACCS_VERSION = @ACCS_VERSION@
OSNAME = @OSNAME@
PREFIX = @prefix@

RELEASE = ../../version

dummy:

#---- package targets -----------------------------------
# Note:  when using set expansion, make variables seem to be
# implicitly quoted, so that these have to be moved to a shall
# variable for the splitting to work correctly.
#
.DEFAULT:
	@IFS="-"; \
	tok=$@; \
	set -- $$tok; \
	if [ -z $$2 ]; then \
	    echo "Unknown target $@"; \
	    exit; \
	fi; \
	$(MAKE) $$2; \
	cd $$2/$$1; $(MAKE) $$2

Darwin FreeBSD Linux Solaris Win32:
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

Darwin64:
	if [ ! -f $@ ]; then \
	    ln -s Darwin $@; \
	fi
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

Debian Debian64:
	if [ ! -f $@ ]; then \
	    ln -s Debian $@; \
	fi
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

FreeBSD7 FreeBSD8 FreeBSD9 FreeBSD10:
	if [ ! -f $@ ]; then \
	    ln -s FreeBSD $@; \
	fi
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

Linux2 LinuxRHEL3 LinuxRHEL4 LinuxRHEL5 LinuxRHEL6 LinuxRHEL7 \
  LinuxRHEL3_64 LinuxRHEL4_64 LinuxRHEL5_64 LinuxRHEL6_64 LinuxRHEL7_64 \
  LinuxOSuSE LinuxOSuSE_64:
	if [ ! -f $@ ]; then \
	    ln -s Linux $@; \
	fi
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

Solaris8 Solaris8_64:
	if [ ! -f $@ ]; then \
	    ln -s Solaris $@; \
	fi
	if [ ! -d root ]; then \
	    mkdir root; \
	fi

clean::
	-@for os in Darwin Debian FreeBSD Linux Solaris Win32; do \
	    if [ -d $$os -a -d $$os/xt_accs ]; then \
	        (cd $$os/xt_accs; $(MAKE) clean); \
	    fi \
	done
	-@rm -rf root/*

distclean: clean




[Setup]

AppName=wrspice
AppVerName=wrspice-VERSION
AppVersion=VERSION
AppPublisher=Whiteley Research Inc.
AppPublisherURL=http://wrcad.com
AppMutex=wrspiceMutex

OutputBaseFilename=xictools_wrspice-Win32-VERSION-i386

Compression=bzip

DefaultDirName=c:\usr\local
DefaultGroupName=XicTools
DirExistsWarning=no

PrivilegesRequired=admin

UninstallFilesDir={app}\xictools\wrspice\uninstall
UninstallDisplayIcon={app}\xictools\bin\wrspice.exe

[Files]

Source: "{app}\xictools\bin\wrspice.exe"; DestDir: "{app}\xictools\bin\wrspice_old"; Flags: external skipifsourcedoesntexist uninsneveruninstall
Source: "{app}\xictools\bin\wrspice.dll"; DestDir: "{app}\xictools\bin\wrspice_old"; Flags: external skipifsourcedoesntexist uninsneveruninstall
Source: "..\root\usr\local\xictools\bin\wrspice.exe"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\wrspice.dll"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\wrspice.bat"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\wrspiced.exe"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\multidec.exe"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\proc2mod.exe"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion
Source: "..\root\usr\local\xictools\bin\printtoraw.exe"; DestDir: "{app}\xictools\bin"; Flags: ignoreversion

Source: "..\root\usr\local\xictools\wrspice\examples\*"; DestDir: "{app}\xictools\wrspice\examples"

Source: "..\root\usr\local\xictools\wrspice\help\*"; DestDir: "{app}\xictools\wrspice\help"
Source: "..\root\usr\local\xictools\wrspice\help\screenshots\*"; DestDir: "{app}\xictools\wrspice\help\screenshots"

Source: "{app}\xictools\wrspice\startup\news"; DestDir: "{app}\xictools\wrspice\startup\old_config"; Flags: external skipifsourcedoesntexist uninsneveruninstall
Source: "{app}\xictools\wrspice\startup\wrspice_mesg"; DestDir: "{app}\xictools\wrspice\startup\old_config"; Flags: external skipifsourcedoesntexist uninsneveruninstall
Source: "{app}\xictools\wrspice\startup\wrspiceinit"; DestDir: "{app}\xictools\wrspice\startup\old_config"; Flags: external skipifsourcedoesntexist uninsneveruninstall

Source: "..\root\usr\local\xictools\wrspice\startup\*"; DestDir: "{app}\xictools\wrspice\startup"
Source: "..\root\usr\local\xictools\wrspice\startup\devices\*"; DestDir: "{app}\xictools\wrspice\startup\devices"

Source: "..\root\usr\local\xictools\wrspice\scripts\*"; DestDir: "{app}\xictools\wrspice\scripts"

Source: "..\root\usr\local\xictools\wrspice\docs\wrs*"; DestDir: "{app}\xictools\wrspice\docs"; Flags: uninsneveruninstall
Source: "..\root\usr\local\xictools\wrspice\docs\README"; DestDir: "{app}\xictools\wrspice\docs"
Source: "..\root\usr\local\xictools\wrspice\docs\MSWINFO.TXT"; DestDir: "{app}\xictools\wrspice\docs"

[Icons]

Name: "{group}\wrspice"; Filename: "{app}\xictools\bin\wrspice.bat"; WorkingDir: "c:\"; IconFilename: "{app}\xictools\bin\wrspice.exe"

[code]

#include "..\..\..\xt_base\packages\files\inno_uninstall"

function InitializeSetup(): Boolean;
begin
  Result := True;
end;

